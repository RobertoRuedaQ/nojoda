# This file should contain all the record creation needed to seed the database with its default values.
# The data can then be loaded with the rails db:seed command (or created alongside the database with db:setup).
#
# Examples:
#
#   movies = Movie.create([{ name: 'Star Wars' }, { name: 'Lord of the Rings' }])
#   Character.create(name: 'Luke', movie: movies.first)

# Rails.application.eager_load!
# lumni_models = ActiveRecord::Base.descendants.uniq{|c| c.to_s}.map{|c| c.to_s}
# pending_models = lumni_models.map{|m| m }.compact
# if pending_models.count > 0
# 	ModelTable.create(pending_models.map{|m| {name: m}})
# 	@models = ModelTable.kept
# end

# @models.each do |m|
# 	begin
# 		currentFields = m.field_table.map{|f| f.name}
# 		pendingFields = eval(m.name).attribute_names.map{|f| currentFields.index(f).nil? ? f : nil }.compact
# 		if pendingFields.count > 0
# 			m.update_attributes({status: 'processed'})
# 			FieldTable.create(pendingFields.map{|f| {name: f, model_table: m, field_type: lumni_attribute_names(m,f),status: 'active', required: false, help: false }})
# 			User.columns_hash['updated_at'].type
# 		end
# 	rescue

# 		m.update_attributes({status: 'system'})
# 	end
# end
include ApplicationHelper

# Creating Task Types

defaultTask = ProjectTaskType.create({title: 'custom', description: 'Generic Task Type, for non listed task types.'})
confirmationEmailTask = ProjectTaskType.create({title: 'confirm_email', description: 'This task will allow students to see the applications menu.',functionality: 'confirm_email_task'})


# Creating main countries
puts 'creating countries'

colombia = Country.create({name: 'Colombia',yearly_usury_rate: 40,round_up_to: 2,currency: 'COP'})
usa = Country.create({name: 'USA',yearly_usury_rate: 40,round_up_to: 2,currency: 'USD'})
peru = Country.create({name: 'Perú',yearly_usury_rate: 40,round_up_to: 2,currency: 'PEN'})
chile = Country.create({name: 'Chile',yearly_usury_rate: 40,round_up_to: 2,currency: 'CLP'})
mexico = Country.create({name: 'Mexico',yearly_usury_rate: 40,round_up_to: 2,currency: 'MXN'})







# Creating main roles
puts 'Creating Roles'
viewRoles = ['new','edit']
actionRoles = ['create','update','destroy','view']
variationRoles = ['','_with_approval','_approver']
controllerList = Rails.application.routes.routes.map do |route|
  (!route.defaults[:controller].nil? && !route.defaults[:controller].include?('/')) ? route.defaults[:controller] : nil
end.uniq.compact

roleList = []
controllerList.each do |controller|
	actionRoles.each do |action|
		variationRoles.each do |variation|
			roleList += [{name: controller + '_' + action + variation}]
		end

	end
end

## superuser roles

superUserRoleList = []
controllerList.each do |controller|
	actionRoles.each do |action|
		superUserRoleList += [controller + '_' + action ]

	end
end


# Role.create(roleList + [{name: 'student'},{name: 'alpha'}])

# Create companies
puts 'Creating Companies'
lumniINC = Company.create(name: 'Lumni INC',company: nil,country: usa,status: 'active',url: 'localhost:3000',
	default_language: 'en',timezone: 'America/New_York',main_title: 'home.your_collateral',slogan: 'home.pay_what_you_can')
lumniUSA = Company.create(name: 'Lumni USA',company: lumniINC,country: usa,status: 'active',url: 'usa.lumniportal.net',
	default_language: 'en',timezone: 'America/New_York',main_title: 'home.your_collateral',slogan: 'home.pay_what_you_can')
lumniColombia = Company.create(name: 'Lumni Colombia',company: lumniINC,country: colombia,status: 'active',url: 'colombia.lumniportal.net',
	default_language: 'es',timezone: 'America/Bogota',main_title: 'home.your_collateral',slogan: 'home.pay_what_you_can')
lumniPeru = Company.create(name: 'Lumni Perú',company: lumniINC,country: peru,status: 'active',url: 'peru.lumniportal.net',
	default_language: 'es',timezone: 'America/Lima',main_title: 'home.your_collateral',slogan: 'home.pay_what_you_can')
lumniChile = Company.create(name: 'Lumni Chile',company: lumniINC,country: chile,status: 'active',url: 'chile.lumniportal.net',
	default_language: 'es',timezone: 'America/Santiago',main_title: 'home.your_collateral',slogan: 'home.pay_what_you_can')
lumniMexico = Company.create(name: 'Lumni Mexico',company: lumniINC,country: mexico,status: 'active',url: 'mexico.lumniportal.net',
	default_language: 'es',timezone: 'America/Santiago',main_title: 'home.your_collateral',slogan: 'home.pay_what_you_can')
bff = Company.create(name: 'Better Future Forward',company: nil,country: usa,status: 'active',url: 'bff.lumniportal.net',
	default_language: 'en',timezone: 'America/New_York',main_title: 'home.your_collateral',slogan: 'home.pay_what_you_can')


# Comunications
communicationCase = CommunicationCase.create({title: 'confirmation_email',description: 'This is the email we send to allow students to confirm their email.',
	company_id: lumniINC.id})
communicationHeader = CommunicationHeader.create({title: "Lumni's General Header",body: "<div style=\"background-color: #f6f8fa\">    <div class=\"row mt-5 mb-3\">        <div class=\"col-1\"><br></div>        <div class=\"col-lg-2\"><br></div>        <div class=\"col-lg-4\">            <img class=\"img-fluid w-50\" width=\"30\" height=\"13\" src=\"https://s3-us-west-2.amazonaws.com/logosp4/lumni_logo.png\">        </div>        <div class=\"col-lg-4\"><br></div>        <div class=\"col-1\"><br></div>    </div></div>",
	company_id: lumniINC.id})
communicationFooter = CommunicationFooter.create({title: "Lumni's General Footer",body: "<div style=\"background-color: #f6f8fa\">    <p class=\"text-center mt-2 mb-5\" style=\"font-size: 12px;color: #135a80;\">This is an automatically generated message. Please do not reply to this address.</p></div><div class=\"bg-dark text-white\">    <div class=\"row my-3 \">        <div class=\"col-lg-2\"><br></div>        <div class=\"col-8 float-center text-secondary\">            <h5 class=\"mb-3 text-center\">Do you need some help?</h5>            <h6 class=\"mb-2 text-center\"> Please contact us if you have questions or need some help:</h6>            <h5 class=\"mb-2 text-center\">(651) 401-8401</h5>            <h6 class=\"text-center\">help@betterfutureforward.org</h6>        </div>        <div class=\"col-lg-2\"><br></div>    </div></div>",
	company_id: lumniINC.id})
communicationTemplate = CommunicationTemplate.create({title: 'Confirmation Email',subject: 'Action Required: Confirm your email',body: "<div style=\"background-color: #f6f8fa\">    <div class=\"row\">        <div class=\"col-1\"><br></div>        <div class=\"col-lg-2\"><br></div>        <div class=\"col-lg-6\">            <div class=\"card \" style=\"border-top: 2px solid #1c87bf; background-color: #ecf2f5;color: #135a80;\">                <div class=\"card-body\">                    <h2 class=\"my-4\">Confirm your email</h2>                    <h5 class=\"mt-3 mb-5\">Welcome to Lumni, ##first_name!</h5>                    <h6 class=\"my-2\">You have successfully registered as an applicant in the Lumni's ISA system.</h6>                    <h6 class=\"my-2\">To confirm your email account you need to enter through the following link:</h6>                    <div class=\"text-center\"> <a class=\"btn btn-success my-5\" href=\"##confirmation_url\">Confirm My Account</a> </div>                    <h6 class=\"mt-3 mb-4\">Sincerely,</h6>                    <h5 class=\"mb-4\">The Lumni Team</h5>                </div>            </div>        </div>        <div class=\"col-lg-2\"><br></div>        <div class=\"col-1\"><br></div>    </div></div>",
	company_id: lumniINC.id, communication_header_id: communicationHeader.id, communication_footer_id: communicationFooter,language: 'en',communication_case_id: communicationCase.id,status: 'active'})



def userCompany country
	case country
	when 'INC'
		target_company = findCompany(1)
	when 'USA'
		target_company = findCompany(2)
	when 'Colombia'
		target_company = findCompany(3)
	when 'Perú'
		target_company = findCompany(4)
	when 'Chile'
		target_company = findCompany(5)
	else
		target_company = findCompany(2)
	end
	return target_company
end

def findCompany id
	Company.find(id)
end	

# Creating sample users
puts 'Creating sample users'
client = Restforce.new()
sf_users = client.query("select Id, FirstName, LastName, Email,Division from User where IsActive=true and Division != ''")

newUsers = sf_users.map{|u| {first_name: u.FirstName.nil? ? 'empty' : properName(u.FirstName), last_name: u.LastName.nil? ? 'empty' : properName(u.LastName), email: u.Email,password: 'asdf1234',
	student_account: false, company: userCompany(u.Division), time_zone: userCompany(u.Division).timezone,language: userCompany(u.Division).default_language, migrated: true, external_id: u.Id}}

creatingUsers = User.create(newUsers)

superUser = User.create({first_name: 'Jaime', last_name: 'Castillo León', email: 'jcastillole@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true,test_account: true})
superUserRoleList.map{|r| superUser.add_role(r)}

studentUser = User.create({first_name: 'Pepito', last_name: 'Perez', email: 'jcastillole+student@gmail.com', password: 'asdf1234',student_account: true,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true,test_account: true})
studentUser.add_role(:student)

# smUser = User.create({first_name: 'SM', last_name: 'Test', email: 'jcastillole+sm@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# smUser.add_role(:student_manager)

# smsUser = User.create({first_name: 'SMS', last_name: 'Test', email: 'jcastillole+sms@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# smsUser.add_role(:student_manager_supervisor)

# directorUser = User.create({first_name: 'Director', last_name: 'Test', email: 'jcastillole+director@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# directorUser.add_role(:director)
# directorUser.add_role(:legal_representative)

# headUser = User.create({first_name: 'Head', last_name: 'Test', email: 'jcastillole+head@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# headUser.add_role(:head)

# researchUser = User.create({first_name: 'Research', last_name: 'Test', email: 'jcastillole+research@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# researchUser.add_role(:research)

# partnerUser = User.create({first_name: 'Partner', last_name: 'Test', email: 'jcastillole+partner@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# partnerUser.add_role(:partner)

# investorUser = User.create({first_name: 'Investor', last_name: 'Test', email: 'jcastillole+investor@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# investorUser.add_role(:investor)

# operationSupportUser = User.create({first_name: 'Operation Support', last_name: 'Test', email: 'jcastillole+operations_support@gmail.com', password: 'asdf1234',student_account: false,company: lumniINC,time_zone: lumniINC.timezone, language: 'en', migrated: true})
# operationSupportUser.add_role(:operation_support)

# Create companies
lumniINC.user = superUser
lumniINC.save
lumniUSA.user = superUser
lumniUSA.save
lumniColombia.user = superUser
lumniColombia.save
lumniPeru.user = superUser
lumniPeru.save
lumniChile.user = superUser
lumniChile.save
bff.user = superUser
bff.save


# Creating legal disclosures
puts 'Creating legal Disclosures'
privacyPolicyBody = "<h4> Introduction</h4><p>Lumni USA and Better Future Forward (collectively, “Lumni” or “We”) respect your privacy and are committed to protecting it through our compliance with this policy.</p><p>Please read this policy carefully to understand our policies and practices regarding your information and how we will treat it. By accessing the website, including any content, functionality and services offered on or through lumni.net or estudianteslumni.net (our “Website”), you agree to this privacy policy. If you do not agree with our policies and practices, your choice is to not use our Website. This policy may change from time to time. Your continued use of this Website after we make changes is deemed to be an acceptance of those changes, so please check the policy periodically for updates. If we make a material change about how we treat our users’ personal information we will notify you at the email address specified in your account.</p><p>This policy describes the types of information we may collect from you or that you may provide when you visit the Website and our practices for collecting, using, maintaining, protecting, and disclosing that information.</p><p>This policy applies to the information we collect on this website; in email, text, or other electronic messages between you and this Website. It does not apply to information collected by us offline or through other means, including on any other website operated by Lumni or any third party; or any third party, including through any application or content that may link or be accessible from or on the Website.</p><h4>Children Under the Age of 13</h4><p>Our Website is not intended for children under 13 years of age. No one under age 13 may provide any information to or on the Website. We do not knowingly collect personal information from children under 13. If you are under 13, do not use or provide any information on this Website or on or through any of its features/register on the Website, make any purchases through the Website, use any of the interactive or public comment features of this Website or provide any information about yourself to us, including your name, address, telephone number, email address, or any screen name or user name you may use. If we learn we have collected or received personal information from a child under 13 without verification of parental consent, we will delete that information. If you believe we might have any information from or about a child under 13, please contact us at contact@lumni.net.</p><h4>Information We Collect About You and How We Collect It</h4><p>We collect several types of information from and about users of our Website, including information:</p><ul> <li>By which you may be personally identified, such as your name, address, email, telephone number, social security number, and school identification number (“Personal Information”);</li> <li>This is about you individually but does not identify you; and/or</li> <li>About your internet connection, the equipment you use to access our website, and usage details.</li></ul><p>We collect this information directly from you when you provide it to us and automatically as you navigate through the Website. Information collected automatically may include usage details, IP addresses, and information collected through cookies, web beacons, and other tracking technologies.</p><h4>Information You Provide to Us</h4><p>The information we collect on or through our Website may include:</p><ul> <li>Information that you provide by filling in forms on our Website. This includes information provided at the time of registering to use our Website or requesting further services. We may also ask you for information when you report a problem with our Website;</li> <li>Records and copies of your correspondence (including email addresses), if you contact us;</li> <li>Your responses to surveys we might ask you to complete for research purposes.</li></ul><h4>Information We Collect Through Automatic Data Collection Technologies</h4><p>As you navigate through and interact with our Website, we may use automatic data collection technologies to collect certain information about your equipment, browsing actions, and patterns, including: </p><ul> <li>Information about your computer and internet connection, including your IP Address, system date and time.</li></ul><p>The information we collect automatically helps us improve our Website and deliver a better and more personalized service, including by enabling us to:</p><ul> <li>Estimate our audience size and usage patterns;</li> <li>Store information about your preferences, allowing us to customize our Website to your individual interests;</li> <li>Speed up your searches;</li> <li>Recognize you when return to our Website.</li></ul><p>The technologies we use for this automatic data collection may include:</p><ul> <li>Cookies (or browser cookies). A cookie is a small file placed on the hard drive of your computer. You may refuse to accept browser cookies by activating the appropriate setting on your browser. However, if you select this setting you may be unable to access certain parts of our Website. Unless you have adjusted your browser setting so that it will refuse cookies, our system will issue cookies when you direct your browser to our Website.</li> <li>Flash Cookies. Certain features of our Website may use local stored objects (or Flash cookies) to collect and store information about your preferences and navigation to, from, and on our Website. Flash cookies are not managed by the same browser settings as are used for browser cookies.</li> <li>Web Beacons. Pages of our the Website and our e-mails may contain small electronic files known as web beacons (also referred to as clear gifs, pixel tags, and single-pixel gifs) that permit the Company, for example, to count users who have visited those pages or [opened an email] and for other related website statistics (for example, recording the popularity of certain website content and verifying system and server integrity).</li></ul><h4>How We Use Your Information</h4><p>We use information that we collect about or from you, including any personal information:</p><ul> <li>To present our Website and its contents to you.</li> <li>To provide you with information, products, or services you request from us.</li> <li>To fulfill any other purpose for which you provide it.</li> <li>To provide you with notices about your account and any income share agreement that we may offer to you.</li> <li>To carry out our obligations and enforce our rights arising from any contracts entered into between you and us.</li> <li>To notify you about changes to our Website or any products or services we offer or provide through it.</li> <li>For any other purpose with your consent.</li></ul><h4>Disclosures of Your Information</h4><p>We may disclose aggregated information about our uses without restriction. </p><p>We may disclose personal information that we collect or you provide as described in this privacy policy and if we offer you an income share agreement, as described in our financial privacy policy:</p><ul> <li>To our subsidiaries and affiliates.</li> <li>To contractors, service providers, and other third parties we use to support our business.</li> <li>To a buyer or other successor in the event of a merger, divestiture, restructuring, reorganization, dissolution, or other sale or transfer of some or all of Better Future Forward or Lumni’s assets in which personal information held by Better Future Forward or Lumni about our Website users is among the assets transferred.</li> <li>To fulfill the purposes for which you provide it.</li> <li>For any other purpose disclosed by us when you provide the information.</li> <li>With your consent.</li> <li>To comply with a court order, law, or legal process, including to respond to any government or regulatory request.</li> <li>To enforce or apply our terms of use <a href=\"http://www.lumni.net/en/content/terms-use\" target=\"_blank\">http://www.lumni.net/en/content/terms-use</a>, or income share agreement, in the event we offer such agreement to you.</li> <li>If we believe disclosure is necessary or appropriate to protect the rights, property, or safety of Better Future Forward or Lumni, our customers, or others.</li></ul><h4>Choices About How We Use and Disclosure Your Information</h4><p>We strive to prove you with choices regarding the personal information you provide to us. We have created mechanisms to prove you with the following control over your information:</p><ul> <li>Tracking Technologies and Advertising. You can set your browser to refuse all or some browser cookies, or to alert you when cookies are being sent. To learn how you can manage your Flash cookie settings, visit the Flash player settings page on Adobe's website. If you disable or refuse cookies, please note that some parts of this site may then be inaccessible or not function properly.</li> <li>Promotional Offers from Lumni or Better Future Forward. If you do not wish to have your contact information used by the Lumni or Better Future Forward to promote our products or services, you can opt-out by sending us an email stating your request to contact@lumni.net or info@betterfutureforward.org (respectively). If we have sent you a promotional email, you may send us a return email asking to be omitted from future email distributions.</li></ul><h4>Accessing and Correcting Your Information</h4><p>You can review and change your personal information by logging into the Website and visiting your account profile page.</p><p>You can also send us an email at contact@lumni.net to request access to, correct, or delete any personal information that you have provided to us. We cannot delete personal information except by also deleting your user account. You may not change or delete information in a way that would inhibit our rights under any income share agreement may offer you. We may not accommodate a request to change information if we believe the change would violate any law or legal requirement or cause the information to be incorrect. </p><h4>Data Security</h4><p>We have implemented measures to secure your personal information from accidental loss and from unauthorized access, use, alteration, and disclosure. Our data security model is based on Salesforce Security Infrastructure; for more information please visit <a href=\"https://help.salesforce.com/articleView?id=security_overview_infrastructure.htm&amp;language=en&amp;type=0\">https://help.salesforce.com/articleView?id=security_overview_infrastructure.htm&amp;language=en&amp;type=0</a>. The safety and security of your information also depends on you. Where you have chosen a password to access our Website, you are responsible for keeping this password confidential. We ask that you not share this password with anyone. </p><p>Unfortunately, the transmission of information via the internet is not completely secure. Although we do our best to protect your personal information, we cannot guarantee the security of your personal information transmitted via our Website. Any transmission of personal information is done at your own risk. We are not responsible for circumvention of any privacy settings or security measures contained on the Website. </p><h4>Contact Information</h4><p>To ask questions or comment about this Privacy Policy and our privacy practices, contact us at:</p><p>Lumni USA</p><p>400 N. Washington St., Suite 203</p><p>Falls Church, Virginia, 22046</p><p>contact@lumni.net</p>"
termsOfUseBody = "<h4> Acceptance of the Terms of Use</h4><p>Please read the Terms of Use carefully before you start to use the Website. By using the Website, you accept and agree to be bound and abide by these Terms of Use and our Privacy Policy, incorporated herein by reference. If you do not want to agree to these Terms of Use or the Privacy Policy, you must not access or use the Website. </p><p>These terms of use are entered into by and between Lumni USA and its partner, Better Future Forward (collectively, \"Lumni\", \"we\" or \"us\") and you. The following terms and conditions, together with any documents they expressly incorporate by reference (collectively, these \"Terms of Use\"), govern your access to and use of lumni.net or estudianteslumni.net, including any content, functionality and services offered on or through lumni.net or estudianteslumni.net (the \"Website\"), whether as a guest or a registered user.</p><p>This Website is offered and available to users who are 13 years of age or older, and reside in the United States or any of its territories or possessions. By using this Website, you represent and warrant that you are of legal age to form a binding contract with the Lumni and meet all of the foregoing eligibility requirements. If you do not meet all of these requirements, you must not access or use the Website.</p><h4>Changes to the Terms of Use</h4><p>We may revise and update these Terms of Use from time to time in our sole discretion. All changes are effective immediately when we post them, and apply to all access to and use of the Website thereafter. </p><p>Your continued use of the Website following the posting of revised Terms of Use means that you accept and agree to the changes. You should check this page from time to time/frequently/each time you access this Website so you are aware of any changes, as they are binding on you. If we make a material change about how we treat our users’ personal information we will notify you at the email address specified in your account. </p><h4>Electronic Consent/Electronic Signature</h4><p>By your continued use of this Website, you are consenting, acknowledging, and agreeing to the Terms of Use and the terms and conditions of any submissions made to us by or through this website.</p><p>If you apply to us for an income share agreement or you request account services or information form us by or through this Website, you will be given the option of also consenting, acknowledging, and agreeing to receive important notices, disclosures, and other communications in electronic form and signing electronically as provided for in the Electronic Documents Consent.</p><p>Because Lumni operates only on the internet, it is necessary for you to consent to transact business with us online and electronically. As part of doing business with us, we need you to consent to our giving you certain disclosures electronically, either via the Website or by email. By agreeing to the Terms of Use, you agree to receive electronically all documents, communications, notices, contracts, and agreements arising from or relating to your use of the Website and Lumni’s services, including any income share agreements you may request or receive, you registration on this Website, your use of the services, or the servicing of your income share agreement, if funded by us. The decision to do business electronically is yours. This document and the Electronic Consent Agreement inform you of your rights concerning your consent to contract electronically and receive disclosures and notices electronically.</p><h4>Product Information</h4><p>This Website may provide information about Lumni and our products and services, including our income share agreements. Information regarding our products and services is not intended to take the place of the agreements governing our products and services, or our disclosures made in accordance with state and federal law. Some products and services may not be available in all states, and the products and services are generally not available for purchase outside of the United States. Eligibility for certain products may vary and is subject to a final determination and acceptance by us.</p><p>Information on this Website is not intended for distribution to, or use by, any persons in any jurisdictions or countries where such distribution or use are not authorized, or where any content of or transaction on this Website is unlawful. Users of this Website do so on their own initiative and are responsible for compliance with local laws. None of the products or services referenced on this Website shall constitute an offer to contract, an offer of credit, or an offer of securities. </p><h4>Use of Your Information</h4><p>You hereby authorize Lumni to collect aggregate information which is not personally identifiable to you about your use of this Website. You also authorize us to use information which is personally identifiable to you (or others) that you send us to provide any service you request.</p><h4>Accessing the Website and Account Security</h4><p>We reserve the right to withdraw or amend this Website, and any service or material we provide on the Website, in our sole discretion without notice. We will not be liable if for any reason all or any part of the Website is unavailable at any time or for any period. From time to time, we may restrict access to some parts of the Website, or the entire Website, to users, including registered users.</p><p>To access the Website or some of the resources it offers, you may be asked to provide certain registration details or other information. It is a condition of your use of the Website that all the information you provide on the Website is correct, current and complete. You agree that all information you provide to register with this Website or otherwise, including but not limited to through the use of any interactive features on the Website, is governed by our Privacy Policy , and you consent to all actions we take with respect to your information consistent with our Privacy Policy. You are responsible for and agree to:</p><ul> <li>Provide accurate, current, and complete information about you as may be prompted by any registration forms on the Website or otherwise requested by Lumni (“Registration Data”);</li> <li>Maintain the security of your password or identification;</li> <li>Make all arrangements necessary for you to have access to the Website;</li> <li>Ensure that all persons who access the Website through your internet connection are aware of these Terms of Use and comply with them.</li></ul><p>If you choose, a user name, password or any other piece of information as part of our security procedures, you must treat such information as confidential, and you must not disclose it to any other person or entity. You also acknowledge that your account is personal to you and agree not to provide any other person with access to this Website or portions of it using your user name, password or other security information. You agree to notify us immediately of any unauthorized access to or use of your user name or password or any other breach of security. You also agree to ensure that you exit from your account at the end of each session. You should use particular caution when accessing your account from a public or shared computer so that others are not able to view or record your password or other personal information.</p><p>We have the right to disable any user name, password or other identifier, whether chosen by you or provided by us, at any time, in our sole discretion for any or no reason, including if, we believe you have violated any provision of these Terms of Use.</p><h4>Proprietary Rights and Restricted Use</h4><p>The Website and its entire contents, features and functionality (including but not limited to all information, software, text, displays, images, video and audio, and the design, selection and arrangement thereof), are owned by Lumni, its licensors or other providers of such material and are protected by United States and international copyright, trademark, patent, trade secret and other intellectual property or proprietary rights laws.</p><p>These Terms of Use permit you to use the Website for your personal, non-commercial use only. You must not reproduce, distribute, modify, create derivative works of, publicly display, publicly perform, republish, download, store or transmit any of the material on our Website, except as follows:</p><ul> <li>Your computer may temporarily store copies of such materials in RAM incidental to your accessing and viewing those materials.</li> <li>You may store files that are automatically cached by your Web browser for display enhancement purposes.</li> <li>You may print or download a reasonable number of pages of the Website for your own personal, non-commercial use and not for further reproduction, publication or distribution.</li> <li>If we provide desktop, mobile or other applications for download, you may download a single copy to your computer or mobile device solely for your own personal, non-commercial use, provided you agree to be bound by our end user license agreement for such applications.</li></ul><p>You must not:</p><ul> <li>Modify copies of any materials from this site.</li> <li>Use any illustrations, photographs, video or audio sequences or any graphics separately from the accompanying text.</li> <li>Delete or alter any copyright, trademark or other proprietary rights notices from copies of materials from this site.</li> <li>You must not access or use for any commercial purposes any part of the Website or any services or materials available through the Website.</li></ul><p>If you wish to make any use of material on the Website other than that set out in this section, please address your request to: contact@lumni.net.</p><p>If you print, copy, modify, download or otherwise use or provide any other person with access to any part of the Website in breach of the Terms of Use, your right to use the Website will cease immediately and you must, at our option, return or destroy any copies of the materials you have made. No right, title or interest in or to the Website or any content on the Website is transferred to you, and all rights not expressly granted are reserved by Lumni. Any use of the Website not expressly permitted by these Terms of Use is a breach of these Terms of Use and may violate copyright, trademark and other laws.</p><h4>Trademarks</h4><p>The name Better Future ForwardTM is a trademarks of Better Future Forward. You must not use such marks without the prior written permission of Better Future Forward. All other names, logos, product and service names, designs and slogans on this Website are the trademarks of their respective owners.</p><h4>Prohibited Uses</h4><p>You may use the Website only for lawful purposes and in accordance with these Terms of Use. You agree not to use the Website:</p><ul> <li>In any way that violates any applicable federal, state, local or international law or regulation (including, without limitation, any laws regarding the export of data or software to and from the US or other countries).</li> <li>For the purpose of exploiting, harming or attempting to exploit or harm minors in any way by exposing them to inappropriate content, asking for personally identifiable information or otherwise.</li> <li>To transmit, or procure the sending of, any advertising or promotional material without our prior written consent, including any \"junk mail\", \"chain letter\" or \"spam\" or any other similar solicitation.</li> <li>To impersonate or attempt to impersonate Lumni, a Lumni employee, another user or any other person or entity (including, without limitation, by using e-mail addresses or screen names associated with any of the foregoing).</li> <li>To engage in any other conduct that restricts or inhibits anyone's use or enjoyment of the Website, or which, as determined by us, may harm the Lumni or users of the Website or expose them to liability.</li></ul><p>Additionally, you agree not to:</p><ul> <li>Use the Website in any manner that could disable, overburden, damage, or impair the site or interfere with any other party's use of the Website, including their ability to engage in real time activities through the Website.</li> <li>Use any robot, spider or other automatic device, process or means to access the Website for any purpose, including monitoring or copying any of the material on the Website.</li> <li>Use any manual process to monitor or copy any of the material on the Website or for any other unauthorized purpose without our prior written consent.</li> <li>Use any device, software or routine that interferes with the proper working of the Website.</li> <li>Introduce any viruses, trojan horses, worms, logic bombs or other material which is malicious or technologically harmful.</li> <li>Attempt to gain unauthorized access to, interfere with, damage or disrupt any parts of the Website, the server on which the Website is stored, or any server, computer or database connected to the Website.</li> <li>Attack the Website via a denial-of-service attack or a distributed denial-of-service attack.</li> <li>Otherwise attempt to interfere with the proper working of the Website.</li></ul><h4>Customer Communications</h4><p>By accepting these Terms of Use, you expressly consent to be contacted by us, our agents, representatives, affiliates, or anyone calling on our behalf for any and all purposes, at any telephone number, or physical or electronic address you provide or at which you may be reached, in accordance with our Telephone Consumer Protection Act Consent . You agree we may contact you in any way, including SMS messages (including text messages), calls using prerecorded messages or artificial voice, and calls and messages delivered using auto telephone dialing system or an automatic texting system. Automated messages may be played when the telephone is answered, whether by you or someone else. In the event that an agent or representative calls, he or she may also leave a message on your answering machine, voice mail, or send one via text.</p><p>Your consent to telemarketing calls is not a condition of obtaining your income share agreement. </p><h4>Monitoring, Enforcement, and Termination</h4><p>We have the right to:</p><ul> <li>Disclose your identity or other information about you to any third party who claims that material posted by you violates their rights, including their intellectual property rights or their right to privacy.</li> <li>Take appropriate legal action, including without limitation, referral to law enforcement, for any illegal or unauthorized use of the Website.</li> <li>Terminate or suspend your access to all or part of the Website for any or no reason, including without limitation, any violation of these Terms of Use.</li></ul><p>Without limiting the foregoing, we have the right to fully cooperate with any law enforcement authorities or court order requesting or directing us to disclose the identity or other information of anyone posting any materials on or through the Website. YOU WAIVE AND HOLD HARMLESS LUMNI AND ITS AFFILIATES, LICENSEES AND SERVICE PROVIDERS FROM ANY CLAIMS RESULTING FROM ANY ACTION TAKEN BY LUMNI/ANY OF THE FOREGOING PARTIES DURING OR AS A RESULT OF ITS INVESTIGATIONS AND FROM ANY ACTIONS TAKEN AS A CONSEQUENCE OF INVESTIGATIONS BY EITHER LUMNI/SUCH PARTIES OR LAW ENFORCEMENT AUTHORITIES.</p><h4>Reliance on Information Posted</h4><p>The information presented on or through the Website is made available solely for general information purposes. We do not warrant the accuracy, completeness or usefulness of this information. Any reliance you place on such information is strictly at your own risk. We disclaim all liability and responsibility arising from any reliance placed on such materials by you or any other visitor to the Website, or by anyone who may be informed of any of its contents.</p><p>Certain Information that is provided on this Website is independently obtained, prepared, and provided by third party (“Third Party Information”), which is not affiliated with Lumni. Lumni is not responsible for these third parties. This Third Party Information is provided free of charge for your general understanding and should not be relied upon for specific investment decisions and transactions. Lumni has not reviewed the Third Party Information and is not responsible for the accuracy, completeness, reliability, or correct sequencing of the Third Party Information. The Third Party Information does not in any way represent the opinion of Lumni.</p><h4>Links from the Website</h4><p>LINKS TO OTHER INTERNET WEBSITES PROVIDED BY THIRD PARTIES ARE PROVIDED FOR YOUR CONVENIENCE AND INFORMATION ONLY. THE CONTENT IN ANY LINKED WEBSITE IS NOT UNDER OUR CONTROL AND WE ARE NTO RESPONSIBLE FOR IT.</p><p>If the Website contains links to other sites and resources provided by third parties, these links are provided for your convenience only. This includes links contained in advertisements, including banner advertisements and sponsored links. We have no control over the contents of those sites or resources, and accept no responsibility for them or for any loss or damage that may arise from your use of them. If you decide to access any of the third party websites linked to this Website, you do so entirely at your own risk and subject to the terms and conditions of use for such websites. You should review the applicable terms and conditions, including privacy policies of any website to which you navigate from this Website. We reserve the right to terminate a link to another website at any time. The fact that we provide a link to a website does not necessarily mean we endorse, authorize, or sponsor that website, or that we are affiliated with the website’s owners or sponsors.</p><h4>Geographic Restrictions</h4><p>The owner of the Website is based in the state of Virginia in the United States. We provide this Website for use only by persons located in the United States. We make no claims that the Website or any of its content is accessible or appropriate outside of the United States. Access to the Website may not be legal by certain persons or in certain countries. If you access the Website from outside the United States, you do so on your own initiative and are responsible for compliance with local laws.</p><h4>Disclaimer of Warranties</h4><p>Although we try to provide accurate and timely information on this Site, there may be inadvertent, technical or factual inaccuracies and typographical errors. Furthermore, there are certain aspects of web usage, e-mail, your computer and your link to the Internet which we cannot control. Accordingly, we make no representation that the operation of this Site will be uninterrupted or error free, and we will not be liable for the consequences of any interruptions or errors or loss. For these reasons, we cannot warrant the accuracy, completeness, or timeliness of the information, text, graphics, links, or other items on this Site or the privacy of responses to you via e-mail.</p><p>You understand that we cannot and do not guarantee or warrant that files available for downloading from the internet or the Website will be free of viruses or other destructive code. You are responsible for implementing sufficient procedures and checkpoints to satisfy your particular requirements for anti-virus protection and accuracy of data input and output, and for maintaining a means external to our site for any reconstruction of any lost data. WE WILL NOT BE LIABLE FOR ANY LOSS OR DAMAGE CAUSED BY A DISTRIBUTED DENIAL-OF-SERVICE ATTACK, VIRUSES OR OTHER TECHNOLOGICALLY HARMFUL MATERIAL THAT MAY INFECT YOUR COMPUTER EQUIPMENT, COMPUTER PROGRAMS, DATA OR OTHER PROPRIETARY MATERIAL DUE TO YOUR USE OF THE WEBSITE OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE WEBSITE OR TO YOUR DOWNLOADING OF ANY MATERIAL POSTED ON IT, OR ON ANY WEBSITE LINKED TO IT.</p><p>YOUR USE OF THE WEBSITE, ITS CONTENT AND ANY SERVICES OR ITEMS OBTAINED THROUGH THE WEBSITE IS AT YOUR OWN RISK. THE WEBSITE, ITS CONTENT AND ANY SERVICES OR ITEMS OBTAINED THROUGH THE WEBSITE ARE PROVIDED ON AN \"AS IS\" AND \"AS AVAILABLE\" BASIS, WITHOUT ANY WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. NEITHER THE COMPANY NOR ANY PERSON ASSOCIATED WITH THE COMPANY MAKES ANY WARRANTY OR REPRESENTATION WITH RESPECT TO THE COMPLETENESS, SECURITY, RELIABILITY, QUALITY, ACCURACY OR AVAILABILITY OF THE WEBSITE. WITHOUT LIMITING THE FOREGOING, NEITHER THE COMPANY NOR ANYONE ASSOCIATED WITH THE COMPANY REPRESENTS OR WARRANTS THAT THE WEBSITE, ITS CONTENT OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE WEBSITE WILL BE ACCURATE, RELIABLE, ERROR-FREE OR UNINTERRUPTED, THAT DEFECTS WILL BE CORRECTED, THAT OUR SITE OR THE SERVER THAT MAKES IT AVAILABLE ARE FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS OR THAT THE WEBSITE OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE WEBSITE WILL OTHERWISE MEET YOUR NEEDS OR EXPECTATIONS. </p><p>LUMNI HEREBY DISCLAIMS ALL WARRANTIES OF ANY KIND, WHETHER EXPRESS OR IMPLIED, STATUTORY OR OTHERWISE, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT AND FITNESS FOR PARTICULAR PURPOSE.</p><p>THE FOREGOING DOES NOT AFFECT ANY WARRANTIES WHICH CANNOT BE EXCLUDED OR LIMITED UNDER APPLICABLE LAW.</p><h4>Indemnification</h4><p>You agree to defend, indemnify and hold harmless Lumni and Better Future Forward, their affiliates, licensors and service providers, and its and their respective officers, directors, employees, contractors, agents, licensors, suppliers, successors and assigns from and against any claims, liabilities, damages, judgments, awards, losses, costs, expenses or fees (including reasonable attorneys' fees) arising out of or relating to your violation of these Terms of Use or your use of the Website, including, but not limited to, any use of the Website's content, services and products other than as expressly authorized in these Terms of Use or your use of any information obtained from the Website.</p><h4>No Relationship</h4><p>We make every reasonable effort to provide you with sound information at our Site, and we also invite you to make personal contact with us via non-Internet means. However, limitations of the Internet do not allow us to establish a client, fiduciary or professional relationship with you through this Site.&nbsp;THE INFORMATION CONTAINED ON THE PAGES OF THIS WEBSITE IS NOT INTENDED TO PROVIDE, AND YOU SHOULD NOT RELY ON IT FOR, LEGAL, ACCOUNTING, FINANCIAL OR TAX ADVICE. PLEASE CONSULT WITH YOUR LEGAL COUNSEL OR ACCOUNTING, FINANCIAL, OR TAX ADVISER BEFORE USING ANY OF THIS INFORMATION.</p><h4>Governing Law and Jurisdiction</h4><p>All matters relating to the Website and these Terms of Use and any dispute or claim arising therefrom or related thereto (in each case, including non-contractual disputes or claims), shall be governed by and construed in accordance with the internal laws of the Commonwealth of Virginia without giving effect to any choice or conflict of law provision or rule (whether of the Commonwealth of Virginia or any other jurisdiction).</p><h4>Waiver and Severability</h4><p>No waiver of by Lumni of any term or condition set forth in these Terms of Use shall be deemed a further or continuing waiver of such term or condition or a waiver of any other term or condition, and any failure of Lumni to assert a right or provision under these Terms of Use shall not constitute a waiver of such right or provision.</p><p>If any provision of these Terms of Use is held by a court or other tribunal of competent jurisdiction to be invalid, illegal or unenforceable for any reason, such provision shall be eliminated or limited to the minimum extent such that the remaining provisions of the Terms of Use will continue in full force and effect. </p><h4>No Use of Website by Minors</h4><p>No person under the age of 13 may use this Site. We do not knowingly solicit business by minors or children and request that any person under the age of 13 have their parent or responsible adult contact us. If you are under age 13, please leave this Site immediately. You agree to report all information you have about any person under 13 who uses this Site to us immediately using the Contact Information below. &nbsp;By using any of Lumni’s services or the Site, you represent and warrant that, if you are a natural person, you are 13 or older and that you agree to and will abide by all of the terms and conditions of these Terms of Use.</p><h4>Communications of Internet Not Guaranteed</h4><p>Although we try to protect information you send us, we cannot guarantee that information sent over the Internet is completely confidential. There are certain aspects of Internet usage, your computer, and your links to the Internet that we cannot control. Therefore, transmission of information to us on the Internet must be undertaken at your own risk.</p><h4>Communications to You by Us</h4><p>We will respond to your inquiries and questions via e-mail if you provide us with an e-mail address. However, be advised that information sent by e-mail may not be completely confidential not only because of certain aspects of electronic transfer, but also because others may have access to the computer or e-mail address to which the e-mail response is sent. Unless you specifically state in capital letters within your inquiry as follows: “DO NOT RESPOND TO THIS INQUIRY BY E-MAIL”, you hereby consent to response to your inquiries and questions via e-mail in view of the risks inherent in using e-mail.</p><h4>Competitors May Not Use This Website</h4><p>You agree that you are not a competitor of the Bank in the financial services industry. Competitors and their employees, agents, and contractors may not use this Site for any purpose. Employees of competitors may use this Site for their personal use so long as information is not disclosed to a competitor business, used for a commercial purpose, or used for any purpose of competing with the Bank.</p><h4>Entire Agreement</h4><p>The Terms of Use and our Privacy Policy constitute the sole and entire agreement between you and Better Future Forward with respect to the Website and supersede all prior and contemporaneous understandings, agreements, representations and warranties, both written and oral, with respect to the Website. </p><h4>Contact Information</h4><p>To ask questions or comment about these Terms of Use, contact us at:</p><p>Lumni USA</p><p>400 N. Washington St., Suite 201</p><p>Falls Church, Virginia, 22046</p><p>contact@lumni.net</p>"
eligibilityCriteriaBody = "<p>In order to be eligible for this program, you must:</p><ul>    <li>Be seeking a bachelor’s degree</li>    <li>Be a freshman, sophomore, junior or senior by the time you would be receiving financing</li>    <li>Be enrolled full-time</li>    <li>Have a minimum cumulative college GPA of 2.5 (or equivalent for your institution)</li>    <li>Be making Satisfactory Academic Progress (as determined by your school)</li>    <li>Have no significant adverse credit events (though credit score is not a consideration)</li>    <li>Be a U.S. citizen or permanent resident</li>    <li>Have completed a Free Application for Federal Student Aid (FAFSA)</li>    <li>Have completed or plan to complete registration for the term for which you are applying</li>    <li>Be a participant in One Million Degrees</li>    <li>Be at least the age of majority (the age of adulthood) in your state of residence at the time you sign the agreement</li>    <p>Note: As part of the application, you will need the names and contact information for two references who have known you for at least five years (family members, friends, professors, work colleagues, or other contacts). We may contact these references        in the future if you change your contact information without notifying us.</p></ul>"


privaciPolicy = LegalDocument.create({name: 'Privacy Policy',body: privacyPolicyBody,document_type: 'privacy_policy', access: 'general',
	status: 'active', validation_method: 'sign_up',activation_method: 'new',language: 'en',company: bff})
termsOfUse = LegalDocument.create({name: 'Terms Of Use',body: termsOfUseBody,document_type: 'terms_of_use', access: 'general',
	status: 'active', validation_method: 'sign_up',activation_method: 'new',language: 'en',company: bff})
eligibilityCriteria = LegalDocument.create({name: 'First Eligibility Criteria',body: eligibilityCriteriaBody,document_type: 'eligibility_criteria', access: 'general',
	status: 'active', validation_method: 'mandatory_agree',activation_method: 'new',language: 'en',company: bff})

fund = Fund.create({name: "First Fund",preapproval_by_investor: true,renewal_in_years: 1,active: true, applies_taxes: true,
	close_day: 3,timely_payment_day: 10,start_date: "2018-01-12",close_date: "2018-01-12",extension_periods: 1,company: lumniINC})
funding_opportunity = FundingOpportunity.create({name: "First Funding Opportunity", fund: fund, available_places: 100, status: 'active',
	start_date: "2018-01-12",budget: 1000000,opportunity_type: 'open',signer: superUser,eligibility_criteria: eligibilityCriteria})










