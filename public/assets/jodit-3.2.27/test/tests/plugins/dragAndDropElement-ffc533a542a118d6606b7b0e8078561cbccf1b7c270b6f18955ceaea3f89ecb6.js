describe("Drag and drop element inside Editor",function(){["mousedown|mousemove|mouseup","touchstart|touchmove|touchend"].map(function(e){return e.split("|")}).forEach(function(e){describe(e[0]+" and move image inside the editor",function(){it("Should "+e[1]+" dom element",function(){var t=new Jodit(appendTestArea());t.value='<p>1111</p><p>2222</p><img style="width: 100px" src="https://xdsoft.net/jodit/build/images/artio.jpg" alt=""><p>3333</p><p>4444</p>',simulateEvent(e[0],0,t.editor.getElementsByTagName("img")[0]),window.scrollTo(0,1e5);var o=offset(t.editor.querySelectorAll("p")[1]);createPoint(o.left+20,o.top+5),simulateEvent(e[1],0,t.editor,function(e){e.clientX=o.left+15,e.clientY=o.top+5-document.documentElement.scrollTop}),simulateEvent(e[2],0,t.editor,function(e){e.clientX=o.left+20,e.clientY=o.top+5-document.documentElement.scrollTop}),expect(t.value).to.be.equal('<p>1111</p><p>22<img style="width: 100px" src="https://xdsoft.net/jodit/build/images/artio.jpg" alt="">22</p><p>3333</p><p>4444</p>')})}),describe(e[1]+" image inside anchor",function(){it("Should "+e[1]+" anchor with image",function(){var t=new Jodit(appendTestArea());t.value='<p>1111</p><p>2222</p><a href="#test"><img style="width: 100px" src="https://xdsoft.net/jodit/build/images/artio.jpg" alt=""></a><p>3333</p><p>4444</p>',simulateEvent(e[0],0,t.editor.getElementsByTagName("img")[0]);var o=Jodit.modules.Helpers.offset(t.editor.querySelectorAll("p")[1],t,t.editorDocument);simulateEvent(e[1],0,t.editor,function(e){e.clientX=o.left+15,e.clientY=o.top+5-document.documentElement.scrollTop}),simulateEvent(e[2],0,t.editor,function(e){e.clientX=o.left+20,e.clientY=o.top+5-document.documentElement.scrollTop}),expect(t.value).to.be.equal('<p>1111</p><p>22<a href="#test"><img style="width: 100px" src="https://xdsoft.net/jodit/build/images/artio.jpg" alt=""></a>22</p><p>3333</p><p>4444</p>')})}),describe("Disable dragging",function(){it("Should not move image",function(){var t=new Jodit(appendTestArea(),{draggableTags:[]}),o='<p>1111</p><p>2222</p><a href="#test"><img style="width: 100px" src="https://xdsoft.net/jodit/build/images/artio.jpg" alt=""></a><p>3333</p><p>4444</p>';t.value=o,simulateEvent(e[0],0,t.editor.getElementsByTagName("img")[0]);var i=Jodit.modules.Helpers.offset(t.editor.querySelectorAll("p")[1],t,t.editorDocument);simulateEvent(e[1],0,t.editor,function(e){e.clientX=i.left+15,e.clientY=i.top+5-document.documentElement.scrollTop}),simulateEvent(e[2],0,t.editor,function(e){e.clientX=i.left+20,e.clientY=i.top+5-document.documentElement.scrollTop}),expect(t.value).to.be.equal(o)})})}),afterEach(removeStuff)});