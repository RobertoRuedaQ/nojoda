describe("Iframe mode",function(){describe("Create editor with iframe node",function(){it("Should create editable area in another document",function(e){unmocPromise();new Jodit(appendTestArea(),{iframe:!0,events:{afterConstructor:function(t){expect(t.ownerDocument).to.be.not.equal(t.editorDocument),expect("true").to.be.equal(t.editorDocument.body.getAttribute("contenteditable")),e()}}})}),it("Should have same direction and language",function(){var e=new Jodit(appendTestArea(),{iframe:!0,direction:"rtl",language:"de"});expect("rtl").to.be.equal(e.editorDocument.documentElement.getAttribute("dir")),expect("de").to.be.equal(e.editorDocument.documentElement.getAttribute("lang"))}),describe("And exec command",function(){it("Should use body like editor area",function(e){unmocPromise();new Jodit(appendTestArea(),{iframe:!0,events:{afterConstructor:function(t){t.setEditorValue("test test stop"),expect("test test stop").to.be.equal(t.editorDocument.body.innerHTML);var o=t.editorDocument.createRange();o.selectNodeContents(t.editorDocument.body),t.selection.selectRange(o),t.execCommand("bold"),expect("<strong>test test stop</strong>").to.be.equal(t.editorDocument.body.innerHTML),e()}}})})}),describe("Set value right after construct",function(){it("Should set/get value without some trouble",function(e){unmocPromise();var t=appendTestArea();t.value="stop";var o=new Jodit(t,{iframe:!0,events:{afterConstructor:function(t){expect(t.value).to.be.equal("test"),e()}}});expect(o.value).to.be.equal("stop"),o.value="test",expect(o.value).to.be.equal("test")})})}),describe("Define document for iframe from some site",function(){it("Should work perfect",function(e){unmocPromise();var t=appendTestArea();t.value="start value";new Jodit(t,{iframe:!0,events:{afterConstructor:function(t){expect(t.editor.getAttribute("secret-attriute")).to.be.equal("435"),expect(Jodit.modules.Helpers.trim(t.value)).to.be.equal("test 435"),e()},beforeSetValueToEditor:function(){return!1},"generateDocumentStructure.iframe":function(e,t){return t.events.stopPropagation("generateDocumentStructure.iframe"),new Promise(e=>{t.iframe.onload=function(){e()},setTimeout(function(){e()},4e3),t.iframe.src="test.index.html"})}}})}).timeout(5e3)}),afterEach(removeStuff)});