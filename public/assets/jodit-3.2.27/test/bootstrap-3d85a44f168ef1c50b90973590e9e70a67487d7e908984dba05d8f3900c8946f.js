function SyncPromise(e){var t,o=this,n=!1;e(function(){t=arguments,n=!0},function(){t=arguments}),this.then=function(e){return n&&e.apply(o,t),o},this["catch"]=function(e){return n||e.apply(o,t),o}}function mocPromise(){window.Promise=SyncPromise}function unmocPromise(){window.Promise=naturalPromise}function toFixedWithoutRounding(e,t){var o=Math.pow(10,14),n=Math.pow(10,14-t),i=Math.pow(10,t);return Math.floor(Math.floor(e*o+1)/n)/i}function offset(e){var t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o,width:t.width,height:t.height}}
/**
 * innerHTML property for SVGElement
 * Copyright(c) 2010, Jeff Schiller
 *
 * Licensed under the Apache License, Version 2
 *
 * Works in a SVG document in Chrome 6+, Safari 5+, Firefox 4+ and IE9+.
 * Works in a HTML5 document in Chrome 7+, Firefox 4+ and IE9+.
 * Does not work in Opera since it doesn't support the SVGElement interface yet.
 *
 * I haven't decided on the best name for this property - thus the duplication.
 */"undefined"!=typeof window.chai&&(chai.config.includeStack=!0);var oldI18n=Jodit.prototype.i18n,oldAjaxSender=Jodit.modules.Ajax.prototype.send;SyncPromise.resolve=function(){return new SyncPromise(e=>{e()})},SyncPromise.reject=function(e){throw new Error(e)},SyncPromise.all=function(e){return new SyncPromise(function(t,o){var n=0;e.forEach(function(e){e.then(function(){n++})}),n===e.length?t():o()})};var naturalPromise=window.Promise,defaultPermissions={permissions:{allowFiles:!0,allowFileMove:!0,allowFileUpload:!0,allowFileUploadRemote:!0,allowFileRemove:!0,allowFileRename:!0,allowFolders:!0,allowFolderMove:!0,allowFolderCreate:!0,allowFolderRemove:!0,allowFolderRename:!0,allowImageResize:!0,allowImageCrop:!0}};"undefined"!=typeof window.chai&&(mocPromise(),window.FormData=function(){this.data={},this.append=function(e,t){this.data[e]=t},this.get=function(e){return this.data[e]}},Jodit.modules.Ajax.prototype.send=function(){var e=this,t=e.options.data.action;if(!t&&e.options.data.get&&(t=e.options.data.get("action")),t===undefined&&this.options.url&&this.options.url.match(/action=/)){var o=/action=([\w]+)/.exec(this.options.url);t=o[1]}return new SyncPromise(function(o){switch(t){case"fileUpload":var n=e.options.data.get("files[0]");o({success:!0,time:"2018-03-31 23:38:54",data:{baseurl:"https://xdsoft.net/jodit/files/",messages:[],files:[n.name],isImages:[/\.(png|jpg|gif)$/.test(n.name)],code:220}});break;case"files":o({success:!0,time:"2018-03-15 12:49:49",data:{sources:{"default":{baseurl:"https://xdsoft.net/jodit/files/",path:"",files:[{file:"1966051_524428741092238_1051008806888563137_o.jpg",thumb:"_thumbs/1966051_524428741092238_1051008806888563137_o.jpg",changed:"03/15/2018 12:40 PM",size:"126.59kB",isImage:!0},{file:"images.jpg",thumb:"_thumbs/images.jpg",changed:"01/15/2018 12:40 PM",size:"6.84kB",isImage:!0},{file:"ibanez-s520-443140.jpg",thumb:"_thumbs/ibanez-s520-443140.jpg",changed:"04/15/2018 12:40 PM",size:"18.72kB",isImage:!0},{file:"test.txt",thumb:"_thumbs/test.txt.png",changed:"05/15/2018 12:40 PM",size:"18.72kB",isImage:!1}]}},code:220}});break;case"folders":o({success:!0,time:"2018-03-15 12:49:49",data:{sources:{"default":{baseurl:"https://xdsoft.net/jodit/files/",path:"",folders:[".","ceicom","test"]}},code:220}});break;case"permissions":o({success:!0,time:"2018-03-15 12:49:49",data:defaultPermissions,code:220});break;case"fileUploadRemote":o({success:!0,time:"2018-03-15 12:45:03",data:{newfilename:"artio.jpg",baseurl:"https://xdsoft.net/jodit/files/",code:220}});break;case"getLocalFileByUrl":switch(e.options.data.url){case location.protocol+"//"+location.host+"/tests/artio.jpg":case location.protocol+"//"+location.host+"/test/tests/artio.jpg":case location.protocol+"//"+location.host+"/jodit/test/tests/artio.jpg":case"https://xdsoft.net/jodit/files/th.jpg":o({success:!0,time:"2018-03-15 12:55:00",data:{path:"",name:"th.jpg",source:"default",code:220}});break;default:o({success:!1,time:"2018-03-15 12:08:54",data:{messages:["File does not exist or is above the root of the connector"],code:424}})}}})});var i18nkeys=[];Jodit.prototype.i18n=function(e){return-1===i18nkeys.indexOf(e)&&-1===e.indexOf("<svg")&&i18nkeys.push(e),oldI18n.apply(this,arguments)},Jodit.defaultOptions.observer.timeout=0,Jodit.defaultOptions.cleanHTML&&(Jodit.defaultOptions.cleanHTML.timeout=0,Jodit.defaultOptions.cleanHTML.fillEmptyParagraph=!1),Jodit.defaultOptions.useAceEditor=!1,Jodit.defaultOptions.language="en",Jodit.defaultOptions.iframeCSSLinks.push("/app.css"),Jodit.defaultOptions.iframeStyle+="* {    -webkit-box-sizing: border-box;    -moz-box-sizing: border-box;    box-sizing: border-box;}td,th {    padding: 2px 5px;    vertical-align: top;}",String.prototype.repeat===undefined&&(String.prototype.repeat=function(e){for(var t=[],o=0;o<e;o++)t.push(this);return t.join("")}),function(e){e.matches||(e.matches=e.matchesSelector!==undefined?e.matchesSelector:function(e){var t=this.ownerDocument.querySelectorAll(e),o=this;return Array.prototype.some.call(t,function(e){return e===o})})}(Element.prototype);var expect="undefined"!=typeof chai?chai.expect:function(){},stuff=[],removeStuff=function(){Object.keys(Jodit.instances).forEach(function(e){Jodit.instances[e].destruct()}),stuff.forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild(e),delete e}),stuff.length=0,[].slice.call(document.querySelectorAll(".jodit.jodit_dialog_box.active")).forEach(function(e){simulateEvent("close_dialog",0,e)}),mocPromise()},box=document.createElement("div");document.body.appendChild(box);var getBox=function(){return box},appendTestArea=function(e,t){var o=document.createElement("textarea");return o.setAttribute("id",e||"editor_"+(new Date).getTime()),box.appendChild(o),!t&&stuff.push(o),o},appendTestDiv=function(e,t){var o=document.createElement("div");return o.setAttribute("id",e||"editor_"+(new Date).getTime()),box.appendChild(o),!t&&stuff.push(o),o},trim=function(e){return e.replace(/^[\s\r\t\n]+/g,"").replace(/[\s\r\t\n]+$/g,"")},sortStyles=function(e){var t=e.replace(/&quot;/g,"'").replace(/"/g,"'").split(";");t=t.map(trim).filter(function(e){return e.length});var o=null;return(t=t.map(function(e){var t=e.split(":").map(trim);if("border-image"===t[0])return null;if(/rgb\(/.test(t[1])&&(t[1]=t[1].replace(/rgb\([^\)]+\)/,function(e){return Jodit.modules.Helpers.normalizeColor(e)})),t[0].match(/^border$/)&&(t[1]=t[1].split(/[\s]+/)),t[0].match(/^border-(style|width|color)/)){if(null!==o)return o[1].push(t[1]),null;o=t,t[0]="border",t[1]=[t[1]]}if(/font-family/i.test(t[0])&&(t[1]=t[1].split(",").map(Jodit.modules.Helpers.trim).join(",")),/%$/.test(t[1])){var n=parseFloat(t[1]);n-parseInt(t[1],10)>0&&(t[1]=toFixedWithoutRounding(n,2)+"%")}return t}).filter(function(e){return null!==e}).map(function(e){return e.map(function(e){return"string"==typeof e?e:e.sort().join(" ")}).join(":")}).sort(function(e,t){return e<t?-1:e>t?1:0})).join(";")},sortAtrtibutes=function(e){for(var t,o=/<([^>]+)>/g,n=/([a-z_\-]+)[\s]*=[\s]*"([^"]*)"/i,i=[];tagmatch=o.exec(e);){attrs=[];var a=tagmatch[0];do{if(!(t=n.exec(a)))break;"style"===t[1].toLowerCase()&&(t[2]=sortStyles(t[2])),"unselectable"!==t[1].toLowerCase()?(attrs.push({name:t[1].toLowerCase(),value:t[2]}),a=a.replace(t[0],"attribute:"+attrs.length)):a=a.replace(" "+t[0],"")}while(t);attrs.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),attrs.forEach(function(e,t){a=a.replace("attribute:"+(t+1),e.name+'="'+e.value+'"')}),i.push({name:tagmatch[0],value:a})}return i.forEach(function(t){e=e.replace(t.name,t.value)}),e.replace(/&nbsp;/g," ")},simulateEvent=function(e,t,o,n){var i=(o.ownerDocument||document).createEvent("HTMLEvents");if(i.initEvent(e,!0,!0),i.keyCode=t,i.which=t,n&&n(i),e.match(/^mouse/)&&["pageX","pageY","clientX","clientY"].forEach(function(e){i[e]===undefined&&(i[e]=0)}),e.match(/^touch/)&&!i.changedTouches){var a={};["pageX","pageY","clientX","clientY"].forEach(function(e){a[e]=i[e]}),i.changedTouches=a}o.dispatchEvent(i)},setCursor=function(e,t){var o=document.createRange();o.selectNodeContents(e),o.collapse(!t),window.getSelection().removeAllRanges(),window.getSelection().addRange(o)},createPoint=function(e,t,o){var n=document.createElement("div");n.setAttribute("style","position: absolute; z-index: 1000000000;width: 5px; height: 5px; background: "+(o||"red")+";"),n.style.left=parseInt(e,10)+"px",n.style.top=parseInt(t,10)+"px",document.body.appendChild(n)};
/**
 * innerHTML property for SVGElement
 * Copyright(c) 2010, Jeff Schiller
 *
 * Licensed under the Apache License, Version 2
 *
 * Works in a SVG document in Chrome 6+, Safari 5+, Firefox 4+ and IE9+.
 * Works in a HTML5 document in Chrome 7+, Firefox 4+ and IE9+.
 * Does not work in Opera since it doesn't support the SVGElement interface yet.
 *
 * I haven't decided on the best name for this property - thus the duplication.
 */
!function(){var e=function(t,o){var n=t.nodeType;if(3==n)o.push(t.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==n){if(o.push("<",t.tagName),t.hasAttributes())for(var i=t.attributes,a=0,r=i.length;a<r;++a){var s=i.item(a);o.push(" ",s.name,"='",s.value,"'")}if(t.hasChildNodes()){o.push(">");var l=t.childNodes;for(a=0,r=l.length;a<r;++a)e(l.item(a),o);o.push("</",t.tagName,">")}else o.push("/>")}else{if(8!=n)throw"Error serializing XML. Unhandled node of type: "+n;o.push("<!--",t.nodeValue,"-->")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){for(var t=[],o=this.firstChild;o;)e(o,t),o=o.nextSibling;return t.join("")},set:function(e){for(;this.firstChild;)this.removeChild(this.firstChild);try{var t=new DOMParser;t.async=!1,sXML="<svg xmlns='http://www.w3.org/2000/svg'>"+e+"</svg>";for(var o=t.parseFromString(sXML,"text/xml").documentElement.firstChild;o;)this.appendChild(this.ownerDocument.importNode(o,!0)),o=o.nextSibling}catch(n){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}})}();var FileImage=function(){return{name:"logo.gif",dataURI:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",type:"image/gif"}},FileXLS=function(){return{name:"file.xls",type:"application/xls"}};"undefined"!=typeof window.chai&&(window.FileReader=function(){var e=this;e.result=null,e.readAsDataURL=function(t){e.result=t.dataURI,e.onloadend&&e.onloadend()}}),Object.defineProperty(navigator,"userAgent",{value:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 YaBrowser/18.9.0.3363 Yowser/2.5 Safari/537.36"});